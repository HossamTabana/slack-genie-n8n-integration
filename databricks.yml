bundle:
  name: n8n_databricks_app_bundle

resources:
  apps:
    n8n_databricks_app:
      name: 'n8n-databricks-app'
      source_code_path: src # This assumes the app source code is at the root of the project.
      description: 'A Databricks app which self hosts n8n for building workflows'
      resources:
        - name: 'ngrok-token'
          secret:
            scope: trevorosborne
            key: ngrok-token
            permission: READ
        - name: 'ngrok-url'
          secret:
            scope: trevorosborne
            key: ngrok-url
            permission: READ
        - name: 'postgres-password'
          secret:
            scope: trevorosborne
            key: postgres-password
            permission: READ
        - name: 'postgres-user'
          secret:
            scope: trevorosborne
            key: postgres-user
            permission: READ
        - name: 'postgres-host'
          secret:
            scope: trevorosborne
            key: postgres-host
            permission: READ

targets:
  dev:
    mode: development
    default: true
    workspace:
      host: https://e2-dogfood.staging.cloud.databricks.com/
